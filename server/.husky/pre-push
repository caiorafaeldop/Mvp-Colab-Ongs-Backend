#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ• Husky: Validando cÃ³digo antes do push..."
echo ""

# Navegar para o diretÃ³rio server
cd server

# 1. Lint completo
echo "ğŸ“ Rodando lint completo..."
npm run lint

# 2. Verificar Singletons
echo ""
echo "ğŸ” Verificando padrÃµes de Singleton..."
npm run verify:singletons

# 3. Rodar TODOS os testes
echo ""
echo "ğŸ§ª Rodando todos os testes..."
npm test -- --bail --maxWorkers=4

echo ""
echo "âœ… Todas as validaÃ§Ãµes passaram! Push autorizado."
